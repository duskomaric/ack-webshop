---
import BaseLayout from "../../../layouts/BaseLayout.astro";
import Navigation from "../../../components/global/Navigation.astro";
import WebshopTitle from "../../../components/global/WebshopTitle.astro";
import Footer from "../../../components/global/Footer.astro";
const servicesApi = `${import.meta.env.PUBLIC_ACK_API_EP}/api/v1/orders/`;
const ackOrderCancellationApi = `${import.meta.env.PUBLIC_ACK_API_EP}/api/v1/service-cancellation/`;
---

<BaseLayout>
    <Navigation/>
    <WebshopTitle/>
    <section class="py-20 overflow-hidden bg-white">
        <div
                x-data="{
                    order: {},
                    copied: false,
                    hash: new URLSearchParams(window.location.search).get('orderId'),
                    fetch: async function() {
                        try {
                        console.log(`${window.ackOrderCancellationApi}${this.hash}`);
                            const response = await fetch(`${window.ackOrderCancellationApi}${this.hash}`);
                            const data = await response.json();

                            if (response.status === 404) {
                                //window.location.href = '/404';
                                return;
                            }

                            this.order = data.data;
                        } catch (error) {
                            console.error('Error fetching order:', error);
                        }
                    }
                }"
                x-init="fetch()"
                class="max-w-6xl px-4 py-4 mx-auto lg:py-8 md:px-6">
            <div class="flex flex-wrap -mx-4">
                <div class="m-auto mb-6 uppercase">
                    Neuspješno plaćanje
                </div>

                <div class="flex flex-wrap items-center px-4 mb-6 border-b border-gray-100">
                    <p class="mb-8 text-gray-600">
                        <span class="border-b-4 border-gray-200 w-1/6 block mb-10">Napomena:</span>
                        Najčešći uzrok je pogrešno unesen broj kartice, datum isteka, sigurnosni kod ili nedostatak sredstava.
                        Pokušajte ponovo, a u slučaju uzastopnih grešaka pozovite Vašu banku.
                    </p>
                </div>
            </div>
        </div>
    </section>
    <Footer/>
</BaseLayout>
<script is:inline define:vars={{servicesApi, ackOrderCancellationApi}}>
    window.servicesApi = servicesApi;
    window.ackOrderCancellationApi = ackOrderCancellationApi;
</script>